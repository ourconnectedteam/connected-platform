<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Session | Connected</title>
    <link rel="stylesheet" href="/src/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
</head>

<body>

    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">Connected</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="tutors.html">Tutors</a>
                <a href="counselors.html">Counselors</a>
                <a href="buddies.html">Study Buddies</a>
            </div>
            <div class="nav-auth">
                <a href="#login" class="btn btn-sm btn-secondary btn-white">Log In</a>
                <a href="#signup" class="btn btn-sm btn-primary">Sign Up</a>
            </div>
        </div>
    </nav>

    <main class="page-container">
        <div class="container">

            <!-- Step Indicator -->
            <div class="step-indicator-wrapper">
                <div class="step-indicator">
                    <div class="booking-step-indicator-item active" data-step="1">
                        <div class="booking-step-circle">1</div>
                        <span class="booking-step-label">Details</span>
                    </div>
                    <div class="booking-step-line"></div>
                    <div class="booking-step-indicator-item" data-step="2">
                        <div class="booking-step-circle">2</div>
                        <span class="booking-step-label">Time</span>
                    </div>
                    <div class="booking-step-line"></div>
                    <div class="booking-step-indicator-item" data-step="3">
                        <div class="booking-step-circle">3</div>
                        <span class="booking-step-label">Confirm</span>
                    </div>
                </div>
            </div>

            <div class="booking-grid">

                <!-- Main Form Area -->
                <div class="booking-main">

                    <!-- STEP 1: Details -->
                    <div id="step-1" class="booking-step active">
                        <h2 class="section-title">Session Details</h2>

                        <form id="booking-form-details">

                            <!-- Student Info -->
                            <div class="form-section">
                                <h3>Student Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Full Name</label>
                                        <input type="text" name="fullname" class="form-input"
                                            placeholder="e.g. Alex Student" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Email</label>
                                        <input type="email" name="email" class="form-input"
                                            placeholder="alex@example.com" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Phone (Optional)</label>
                                        <input type="tel" name="phone" class="form-input" placeholder="+123456789">
                                    </div>
                                    <div class="form-group">
                                        <label>Time Zone</label>
                                        <select name="timezone" class="form-select">
                                            <option value="Europe/Madrid" selected>Europe/Madrid (GMT+1)</option>
                                            <option value="Europe/London">Europe/London (GMT+0)</option>
                                            <option value="Asia/Dubai">Asia/Dubai (GMT+4)</option>
                                            <option value="Asia/Singapore">Asia/Singapore (GMT+8)</option>
                                            <option value="America/New_York">America/New York (GMT-5)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>School Name (Optional)</label>
                                    <input type="text" name="school" class="form-input"
                                        placeholder="e.g. International School of...">
                                </div>
                            </div>

                            <!-- IB Info -->
                            <div class="form-section">
                                <h3>IB Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>IB Status</label>
                                        <select name="ib_status" class="form-select" required>
                                            <option value="" disabled selected>Select status</option>
                                            <option value="Year 1">IB Year 1 (Year 12)</option>
                                            <option value="Year 2">IB Year 2 (Year 13)</option>
                                            <option value="Pre-IB">Pre-IB</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Current Grade / Predicted (Optional)</label>
                                        <input type="text" name="grade" class="form-input"
                                            placeholder="e.g. 6 or 40/45">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Subject for Session</label>
                                    <input type="text" name="subject" class="form-input" placeholder="e.g. Math AA HL"
                                        required>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Level</label>
                                        <select name="level" class="form-select" required>
                                            <option value="HL">Higher Level (HL)</option>
                                            <option value="SL">Standard Level (SL)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Topic / Unit (Optional)</label>
                                        <input type="text" name="topic" class="form-input"
                                            placeholder="e.g. Calculus / Integration">
                                    </div>
                                </div>
                            </div>

                            <!-- Session Info -->
                            <div class="form-section">
                                <h3>Session Details</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Type</label>
                                        <select name="session_type" class="form-select">
                                            <option value="Online">Online (Zoom/Meet)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Duration</label>
                                        <select name="duration" class="form-select">
                                            <option value="60">60 Minutes</option>
                                            <option value="30">30 Minutes</option>
                                            <option value="90">90 Minutes</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Notes / What do you need help with?</label>
                                    <textarea name="notes" class="form-textarea" rows="4"
                                        placeholder="Describe what you want to cover..." required></textarea>
                                </div>
                            </div>

                            <!-- Policies -->
                            <div class="form-section policy-section">
                                <label class="checkbox-item">
                                    <input type="checkbox" required>
                                    <span>I agree to the <a href="#">cancellation policy</a> (24h notice).</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" required>
                                    <span>I agree to the <a href="#">terms & privacy policy</a>.</span>
                                </label>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary"
                                    onclick="window.history.back()">Back</button>
                                <button type="submit" class="btn btn-primary" id="btn-to-step-2">Continue</button>
                            </div>
                        </form>
                    </div>

                    <!-- STEP 2: Time Selection (Placeholder for structure) -->
                    <div id="step-2" class="booking-step" style="display: none;">
                        <h2 class="section-title">Select a Time</h2>
                        <!-- Calendar Placeholder -->
                        <div class="calendar-placeholder">
                            <p>Calendar UI will go here.</p>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary back-step" data-to="1">Back</button>
                            <button type="button" class="btn btn-primary next-step" data-to="3">Continue</button>
                        </div>
                    </div>

                    <!-- STEP 3: Confirmation (Payment) -->
                    <div id="step-3" class="booking-step" style="display: none;">
                        <h2 class="section-title">Confirm & Pay</h2>

                        <div class="booking-summary-card">
                            <!-- Dynamic summary filled by Js -->
                            <div id="booking-confirmation-details"></div>
                        </div>

                        <!-- Stripe Payment Element -->
                        <div class="form-section">
                            <h3>Payment Method</h3>
                            <div id="payment-element"
                                style="min-height: 250px; border: 1px dashed #ccc; border-radius: 8px; padding: 20px; text-align: center; color: #888;">
                                <!-- Stripe Elements will mount here -->
                                Loading secure payment form...
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary back-step" data-to="2">Back</button>
                            <button type="button" class="btn btn-primary" id="btn-confirm-booking">Pay &
                                Confirm</button>
                        </div>
                    </div>

                    <script type="module">
                        // Inline script to bind the button since main.js might not have easy access to these precise elements if they are dynamic, 
                        // but actually main.js handles the whole page logic. I will put this logic in main.js instead.
                        // Reverting this thinking. I will modify main.js.
                    </script>
                    <!-- STEP 4: Success -->
                    <div id="step-4" class="booking-step" style="display: none; text-align: center; padding: 48px 0;">
                        <div class="success-message">
                            <div style="font-size: 3rem; margin-bottom: 16px;">ðŸŽ‰</div>
                            <h2 style="font-size: 2rem; margin-bottom: 16px;">Booking Confirmed!</h2>
                            <p style="color: var(--text-secondary); margin-bottom: 32px;">Your session has been
                                successfully
                                scheduled. You can view the details in your dashboard.</p>
                            <a href="dashboard-student.html" class="btn btn-primary">Go to Dashboard</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sticky Summary Sidebar -->


        </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 Connected. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script type="module" src="/src/main.js"></script>
</body>

</html>